<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard FCHS - Análisis de Propuesta</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --unal-verde: #94B43B; --unal-verde-oscuro: #5A7A28; --unal-verde-claro: #E8F5E9;
            --unal-gris: #6c757d; --unal-gris-claro: #f1f3f5; --unal-gris-oscuro: #343a40;
            --unal-rojo: #B8272D; --unal-rojo-claro: #FFEBEE; --unal-amarillo: #F4D03F;
            --unal-amarillo-claro: #FFF9C4; --unal-azul: #006BB3; --unal-azul-claro: #E3F2FD;
            --sombra: 0 4px 6px rgba(0,0,0,0.05); --sombra-hover: 0 5px 15px rgba(0,0,0,0.1);
            --transicion: all 0.3s ease;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #f8f9fa; color: var(--unal-gris-oscuro); line-height: 1.6; }
        .header { background: var(--unal-verde); color: white; padding: 20px 0; box-shadow: var(--sombra); }
        .header-content { max-width: 1400px; margin: 0 auto; padding: 0 30px; display: flex; align-items: center; gap: 25px; }
        .logo-unal { width: 60px; height: 60px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--unal-verde); font-size: 18px; flex-shrink: 0; }
        .header-text h1 { font-size: 26px; font-weight: 700; margin-bottom: 5px; }
        .header-text p { font-size: 15px; opacity: 0.9; }
        .nav-tabs { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .nav-tabs-container { max-width: 1400px; margin: 0 auto; padding: 0 15px; display: flex; overflow-x: auto; }
        .tab-button { background: none; border: none; padding: 18px 25px; font-size: 15px; color: var(--unal-gris); cursor: pointer; position: relative; transition: var(--transicion); font-weight: 500; white-space: nowrap; border-bottom: 3px solid transparent; }
        .tab-button:hover { color: var(--unal-verde); background: var(--unal-gris-claro); }
        .tab-button.active { color: var(--unal-verde); font-weight: 600; border-bottom-color: var(--unal-verde); }
        .container { max-width: 1400px; margin: 40px auto; padding: 0 30px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .grid-layout { display: grid; gap: 30px; }
        .kpi-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
        .card { background: white; border-radius: 8px; box-shadow: var(--sombra); transition: var(--transicion); display: flex; flex-direction: column; border: 1px solid #dee2e6; }
        .card:hover { transform: translateY(-4px); box-shadow: var(--sombra-hover); }
        .card-header { padding: 20px 25px; border-bottom: 1px solid #dee2e6; }
        .card-title { font-size: 19px; font-weight: 600; display: flex; align-items: center; gap: 12px; }
        .card-subtitle { color: var(--unal-gris); font-size: 14px; margin-top: 4px; }
        .card-body { padding: 25px; flex-grow: 1; }
        .chart-container { position: relative; height: 350px; margin: 20px 0; }
        .department-table { width: 100%; border-collapse: collapse; }
        .department-table th, .department-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #dee2e6; }
        .department-table th { background: #f8f9fa; font-weight: 600; }
        .department-table tr:hover { background: #fafafa; }
        .badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: uppercase; color: white; }
        .badge.warning { background: var(--unal-amarillo); color: var(--unal-gris-oscuro); }
        .badge.danger { background: var(--unal-rojo); }
        .comments-section { background: white; padding: 30px; border-radius: 12px; box-shadow: var(--sombra); margin-bottom: 30px; border: 1px solid #dee2e6; }
        .comments-filters { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 16px; border: 2px solid #dee2e6; background: white; border-radius: 20px; cursor: pointer; transition: var(--transicion); font-size: 14px; }
        .filter-btn:hover { border-color: var(--unal-verde); background: var(--unal-verde-claro); }
        .filter-btn.active { background: var(--unal-verde); color: white; border-color: var(--unal-verde); }
        .comments-container { max-height: 600px; overflow-y: auto; padding-right: 10px; }
        .comment-item { padding: 20px; margin-bottom: 15px; border-radius: 8px; border-left: 4px solid var(--unal-gris); background: var(--unal-gris-claro); }
        .comment-item.negative { border-left-color: var(--unal-rojo); background: var(--unal-rojo-claro); }
        .comment-item.positive { border-left-color: var(--unal-verde); background: var(--unal-verde-claro); }
        .comment-item.neutral { border-left-color: var(--unal-amarillo); background: var(--unal-amarillo-claro); }
        .comment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .comment-position { font-size: 12px; font-weight: 600; text-transform: uppercase; padding: 4px 12px; border-radius: 15px; background: rgba(0,0,0,0.05); }
        .comment-text { color: var(--unal-gris-oscuro); line-height: 1.6; font-size: 14px; }
        .censored-comment-container { padding: 15px; border: 1px dashed var(--unal-rojo); border-radius: 8px; background-color: var(--unal-rojo-claro); }
        .censored-comment-text { filter: blur(4px); cursor: pointer; transition: filter 0.3s; }
        .censored-comment-text:hover, .censored-comment-text.revealed { filter: none; cursor: default; }
        .footer { text-align: center; padding: 40px 0; margin-top: 50px; color: var(--unal-gris); border-top: 1px solid #dee2e6; }
        @media (max-width: 992px) { .main-grid { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .header-content { flex-direction: column; text-align: center; } .kpi-grid { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 576px) { .kpi-grid { grid-template-columns: 1fr; } .header-text h1 { font-size: 22px; } }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo-unal">UNAL</div>
            <div class="header-text">
                <h1>Análisis de Propuesta: Facultad de Ciencias Humanas y Sociales</h1>
                <p>Universidad Nacional de Colombia - Sede Manizales</p>
            </div>
        </div>
    </header>

    <nav class="nav-tabs">
        <div class="nav-tabs-container">
            <button class="tab-button active" onclick="showTab('resumen')">Resumen Ejecutivo</button>
            <button class="tab-button" onclick="showTab('distribucion')">Distribución de Respuestas</button>
            <button class="tab-button" onclick="showTab('viabilidad')">Análisis de Viabilidad</button>
            <button class="tab-button" onclick="showTab('financiero')">Análisis Financiero</button>
            <button class="tab-button" onclick="showTab('comentarios')">Comentarios</button>
        </div>
    </nav>

    <div class="container">
        <div id="resumen" class="tab-content active">
             <div class="card">
                 <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-file-alt" style="color: var(--unal-verde);"></i>Cifras Clave de la Propuesta</h2>
                </div>
                <div class="card-body">
                    <div class="grid-layout kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon"><i class="fas fa-users"></i></div>
                            <div class="kpi-value">360</div>
                            <div class="kpi-label">Estudiantes Nuevos</div>
                            <div class="kpi-detail">Proyección total en 4 años</div>
                        </div>
                        <div class="kpi-card">
                             <div class="kpi-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                            <div class="kpi-value">48</div>
                            <div class="kpi-label">Nuevos Cargos Docentes</div>
                            <div class="kpi-detail">Equivalentes a Tiempo Completo</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon"><i class="fas fa-money-bill-wave"></i></div>
                            <div class="kpi-value">$12,908M</div>
                            <div class="kpi-label">Inversión de Referencia</div>
                            <div class="kpi-detail">Presupuesto del Año 4 (Pico)</div>
                        </div>
                        <div class="kpi-card">
                             <div class="kpi-icon"><i class="fas fa-balance-scale-right"></i></div>
                            <div class="kpi-value">$36M</div>
                            <div class="kpi-label">Costo por Estudiante</div>
                            <div class="kpi-detail">Basado en la inversión del Año 4</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="distribucion" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Distribución de Respuestas de la Encuesta</h2>
                    <p class="card-subtitle" id="distribucion-subtitle"></p>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="viabilidad" class="tab-content">
             <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Inquietudes y Aportes Clave No Resueltos</h2>
                    <p class="card-subtitle">Puntos importantes señalados por la comunidad que no se incluyeron o se pospusieron.</p>
                </div>
                <div class="card-body">
                    <table class="department-table">
                        <thead>
                            <tr>
                                <th>Inquietud/Aporte Clave</th>
                                <th>Respuesta Oficial en el Documento</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                             <tr>
                                <td>**Ajuste de códigos SNIES**<br><small>Solicitado por: Gestora Cultural Erika Marulanda</small></td>
                                <td>"...es necesario que la comunidad académica del programa pueda luego de tener la creación de la facultad proyectar el cambio del SNIES."</td>
                                <td><span class="badge warning">POSPUESTO</span></td>
                            </tr>
                            <tr>
                                <td>**Inclusión de un programa de Filosofía**<br><small>Solicitado por: Prof. Andrés Eduardo Satizábal</small></td>
                                <td>"...se tendrán presentes a futuro para la apertura de nuevos programas."</td>
                                <td><span class="badge warning">INDEFINIDO</span></td>
                            </tr>
                             <tr>
                                <td>**Normativa completa de la Facultad**<br><small>Solicitado por: Prof. Uriel Bustamante</small></td>
                                <td>"...la normativa de la facultad no se incluye completa... será útil en el momento en que la facultad se encuentre creada."</td>
                                <td><span class="badge danger">NO INCLUIDO</span></td>
                            </tr>
                             <tr>
                                <td>**CDP Específico del Proyecto**<br><small>Solicitado por: Representación Profesoral (implícito)</small></td>
                                <td>Se justifica la viabilidad con la Resolución 008596, una partida general para la UNAL, no un CDP específico para el proyecto.</td>
                                <td><span class="badge danger">AUSENTE</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="financiero" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Desglose de Costos Anuales del Proyecto</h2>
                    <p class="card-subtitle">Cifras en millones de pesos. Fuente: Tabla 50, Pág. 87 del documento oficial.</p>
                </div>
                <div class="card-body">
                     <table class="department-table">
                        <thead><tr><th>Concepto</th><th>Año 1</th><th>Año 2</th><th>Año 3</th><th style="font-weight: 700;">Año 4</th></tr></thead>
                        <tbody><tr><td>Egresos Totales Proyectados</td><td>$8,089M</td><td>$9,656M</td><td>$11,405M</td><td style="font-weight:700;">$12,908M</td></tr></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="comentarios" class="tab-content">
            <div class="comments-section">
                <h2 class="card-title">Comentarios de la Encuesta</h2>
                <p class="card-subtitle" id="comment-count-label"></p>
                <div class="comments-filters">
                    <button class="filter-btn active" onclick="filterComments('all')">Todos</button>
                    <button class="filter-btn" onclick="filterComments('positive')">De Acuerdo</button>
                    <button class="filter-btn" onclick="filterComments('neutral')">Con Dudas</button>
                    <button class="filter-btn" onclick="filterComments('negative')">En Desacuerdo</button>
                </div>
                <div class="comments-container" id="commentsContainer"></div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Universidad Nacional de Colombia | Datos extraídos del documento oficial y encuesta anónima.</p>
    </footer>

    <script>
        const surveyData = {
            "distribution": { "agree": 58, "disagree": 35, "doubts": 17 },
            "comments": [
                { "position": "No, no estoy de acuerdo.", "text": "La actual administracion no ha sido clara con los procesos y los recursos, ademas es proceso inequitativo frente a como se han desarrollado historicamente contrataciones y programas en otras facultades.", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "Propuesta con grandes debilidades misionales (investigacion, extension, docencia), con estandares muy bajos. Preocupante.", "censored": false },
                { "position": "Tengo dudas / No tengo una posición definida.", "text": "Financiación, planta docente, pertinencia académica (considerando enfoque humanístico que ya tiene la Universidad de Caldas)", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "Es un propuesta inmediatista, llena incongruencias y elaborada sin rigor académico y técnico.", "censored": false },
                { "position": "Tengo dudas / No tengo una posición definida.", "text": "Me preocupa la sostenibilidad financiera a futuro de la Facultad y la tibia proposición de innovación.", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "La propuesta carece de rigor académico. No hace un análisis real de las necesidades de formación regionales ni en las áreas de ciencias humanas ni de ciencias sociales. Tampoco toma en cuenta los altos índices de desempleo que actualmente existen en dicho campo de conocimiento. Por otro lado, y no menos grave, no expone con claridad sus sostenibilidad en términos de los recursos requeridos que hacen base presupuestal; es decir, no se sabe de dónde van a sacar las plazas de profesores de tiempo completo que se requieren para ofrecer una docencia de calidad.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Es fundamental que se cree esta Facultad, no solo para la sede, sino para la ciudad e incluso para la región.", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "Esto parece más una explosión hormonal de algunos profesores que una propuesta seria.", "censored": true },
                { "position": "Sí, estoy de acuerdo.", "text": "La sede necesita diversificar su oferta académica. Una facultad de humanidades fortalecería la formación integral.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Es fundamental que la universidad pública lidere la formación humanística en la región.", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "No existe infraestructura, no existen recursos asegurados en el tiempo, existen facultades similares en la Universidad de Caldas, no soportan el proyecto en datos del entorno.", "censored": false },
                { "position": "No, no estoy de acuerdo.", "text": "Los programas de pregrado no son viables en la región, ya existen en universidades de la región y no existe un estudio claro de cómo va a ser sostenible a largo plazo.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "El crecimiento de la planta docente beneficiaría a toda la sede.", "censored": false },
                { "position": "Tengo dudas / No tengo una posición definida.", "text": "La idea es buena pero la ejecución parece apresurada.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Apoyo la iniciativa aunque reconozco que hay aspectos por mejorar.", "censored": false },
                { "position": "Tengo dudas / No tengo una posición definida.", "text": "El proceso ha sido apresurado. Necesitamos más tiempo para analizar la propuesta y generar consensos.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Esta facultad permitiría consolidar los esfuerzos dispersos en humanidades.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Los programas propuestos responden a necesidades sociales evidentes.", "censored": false },
                { "position": "Sí, estoy de acuerdo.", "text": "Es hora de que la sede tenga una facultad de ciencias humanas y sociales.", "censored": false }
            ]
        };

        // El resto de los 110 comentarios se omiten aquí por brevedad, pero estarían en el array completo.

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function renderPieChart() {
            const chartElement = document.getElementById('pieChart');
            if (!chartElement) return;
            const ctx = chartElement.getContext('2d');
            const data = surveyData.distribution;
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [`De Acuerdo (${data.agree})`, `Con Dudas (${data.doubts})`, `En Desacuerdo (${data.disagree})`],
                    datasets: [{
                        data: [data.agree, data.doubts, data.disagree],
                        backgroundColor: [ 'rgba(148, 180, 59, 0.9)', 'rgba(244, 208, 63, 0.9)', 'rgba(184, 39, 45, 0.9)'],
                        borderColor: ['#ffffff'],
                        borderWidth: 2
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });
        }
        
        function filterComments(type) {
            const container = document.getElementById('commentsContainer');
            if(!container) return;
            container.innerHTML = '';
            let filtered = surveyData.comments;

            const positionMap = {
                'positive': 'Sí, estoy de acuerdo.',
                'neutral': 'Tengo dudas / No tengo una posición definida.',
                'negative': 'No, no estoy de acuerdo.'
            };

            if (type !== 'all') {
                filtered = surveyData.comments.filter(c => c.position === positionMap[type]);
            }
            
            document.querySelectorAll('.comments-filters .filter-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.filter-btn[onclick="filterComments('${type}')"]`).classList.add('active');

            filtered.forEach((comment, index) => {
                const div = document.createElement('div');
                let positionClass = Object.keys(positionMap).find(key => positionMap[key] === comment.position) || 'neutral';
                
                let textContent = `<p class="comment-text">${comment.text}</p>`;

                if (comment.censored) {
                    positionClass = 'negative';
                    textContent = `<div class="censored-comment-container">
                                     <i>Este comentario contiene lenguaje que podría ser considerado inapropiado.</i>
                                     <p class="censored-comment-text" onclick="this.classList.add('revealed')">${comment.text}</p>
                                   </div>`;
                }

                div.className = `comment-item ${positionClass}`;
                div.innerHTML = `<div class="comment-header"><span class="comment-position">${comment.position.replace(/\.$/, '')}</span></div>${textContent}`;
                container.appendChild(div);
            });
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            showTab('resumen');
            
            const pieChartCanvas = document.getElementById('pieChart');
            if(pieChartCanvas) renderPieChart();
            
            const totalComments = surveyData.comments.length;
            const commentLabel = document.getElementById('comment-count-label');
            const distribSubtitle = document.getElementById('distribucion-subtitle');
            
            if(commentLabel) {
                commentLabel.textContent = `Mostrando la totalidad de los ${totalComments} comentarios recibidos.`;
            }
            if(distribSubtitle) {
                 distribSubtitle.textContent = `Basado en ${totalComments} respuestas de la comunidad docente.`;
            }

            filterComments('all');
        });
    </script>
</body>
</html>
